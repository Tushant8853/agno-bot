# Agno Bot Backend - Comprehensive Testing Guide

This guide covers the complete testing suite for the Agno Bot backend, including API testing, WebSocket testing, and automated test execution.

## Overview

The testing suite provides comprehensive coverage of all backend functionality using real data and realistic scenarios. All tests generate detailed reports for future reference and analysis.

## Test Components

### 1. Comprehensive API Testing (test_comprehensive_api.py)
Tests all REST API endpoints with real data:
- Authentication: Signup, login, logout, token refresh
- User Management: Profile retrieval, session management
- Chat: Message sending and processing
- Memory: Context retrieval, search, relationships, analytics
- Health Checks: Server health and status endpoints
- Error Handling: Invalid requests and edge cases

### 2. WebSocket Testing (test_websocket.py)
Tests real-time communication:
- Connection: WebSocket connection establishment
- Message Sending: Real-time message transmission
- Response Handling: Message response processing
- Connection Stability: Rapid message sending
- Error Handling: Invalid JSON and malformed messages
- Cleanup: Proper connection termination

### 3. Test Runner (run_comprehensive_tests.py)
Orchestrates all tests and generates combined reports.

## Quick Start

### Prerequisites
1. Backend server running on http://localhost:8000
2. Python 3.8+ installed
3. Testing dependencies installed

### Installation
```bash
cd backend
pip install -r test_requirements.txt
```

### Running Tests

#### Option 1: Run All Tests (Recommended)
```bash
python run_comprehensive_tests.py
```

#### Option 2: Run Individual Test Suites
```bash
# API Testing only
python test_comprehensive_api.py

# WebSocket Testing only
python test_websocket.py
```

## Test Data

### Real User Data
The tests use realistic user data with proper authentication.

### Real Chat Messages
AI and machine learning focused messages for realistic testing.

### Real Search Queries
Memory system testing queries for comprehensive coverage.

## Test Reports

### Report Types
1. Individual Test Reports: Generated by each test suite
2. Combined Report: Generated by the test runner

### Report Structure
Detailed JSON reports with test results, timestamps, and performance metrics.

## Test Coverage

### API Endpoints Tested
- All authentication endpoints
- All chat endpoints
- All memory endpoints
- Health and status endpoints
- Error handling scenarios

### WebSocket Functionality Tested
- Connection establishment
- Message sending and receiving
- Real-time communication
- Connection stability
- Error handling
- Proper cleanup

## Configuration

### Environment Variables
- BASE_URL: Backend server URL (default: http://localhost:8000)
- API_VERSION: API version (default: v1)
- TIMEOUT: Request timeout in seconds (default: 30)

## Best Practices

### Running Tests
1. Always start the backend server first
2. Run tests in a clean environment
3. Check test reports for detailed analysis
4. Use the combined test runner for comprehensive testing

### Interpreting Results
- 90%+ Success Rate: Excellent - system working well
- 70-89% Success Rate: Good - minor issues to address
- <70% Success Rate: Needs attention - check detailed reports

## Future Enhancements

### Planned Features
- Performance testing (load testing)
- Security testing (penetration testing)
- Integration testing with frontend
- Automated CI/CD pipeline integration
- Test data management system
- Real-time test monitoring dashboard 